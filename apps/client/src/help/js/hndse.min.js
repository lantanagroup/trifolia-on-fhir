"use strict";
/*!
 * HND JavaScript search engine
 * Copyright (C) IBE Software - All rights reserved.
 * Can only be used in documentation generated by HelpNDoc: http://www.helpndoc.com
 */!function(r){r[r.TopicNumber=0]="TopicNumber",r[r.TopicScore=1]="TopicScore"}(Score=Score||{});var Score,HndJsSeWordList=function(){function r(){this.words=[]}return r.prototype.AddWord=function(r){this.words.push(r.toLowerCase())},r.prototype.Clear=function(){this.words=[]},r.prototype.Count=function(){return this.words.length},r.prototype.FindExact=function(r){return r=r.toLowerCase(),this.words.indexOf(r)},r.prototype.FindPartial=function(r){r=r.toLowerCase();for(var o=0;o<this.words.length;o++)if(-1!==r.indexOf(this.words[o]))return o;return-1},r}(),HndJsSeResultScore=function(){function r(){this.scores=[]}return r.prototype.FindTopicIndex=function(r){for(var o=0;o<this.scores.length;o++)if(this.scores[o][Score.TopicNumber]===r)return o;return-1},r.prototype.AddTopics=function(r){var t=this;r&&r.forEach?r.forEach(function(r){var o,e;r&&Array.isArray(r)&&2===r.length?(o=r[Score.TopicNumber],r=r[Score.TopicScore],"number"!=typeof o||o<0||"number"!=typeof r||r<0?console.error("Invalid topic data in AddTopics"):-1<(e=t.FindTopicIndex(o))?t.scores[e][Score.TopicScore]=t.scores[e][Score.TopicScore]+r:t.scores.push([o,r])):console.error("Invalid data in AddTopics")}):console.error("Invalid AddTopics call")},r.prototype.Clear=function(){this.scores=[]},r.prototype.ExcludeTopics=function(r){var o=this;r&&r.forEach?r.forEach(function(r){r&&Array.isArray(r)&&2===r.length?"number"!=typeof(r=r[Score.TopicNumber])||r<0?console.error("Invalid topic data in ExcludeTopics"):-1<(r=o.FindTopicIndex(r))&&o.scores.splice(r,1):console.error("Invalid data in ExcludeTopics")}):console.error("Invalid ExcludeTopics call")},r.prototype.SortByScore=function(){this.scores.sort(function(r,o){return r[Score.TopicScore]>o[Score.TopicScore]?-1:r[Score.TopicScore]<o[Score.TopicScore]?1:0})},r}(),HndJsSe=function(){function r(){this.inputWordsExcluded=new HndJsSeWordList,this.inputWordsIncluded=new HndJsSeWordList,this.inputWordsMandatory=new HndJsSeWordList,this.resultScoreIncluded=new HndJsSeResultScore,this.resultScoreMandatory=new HndJsSeResultScore,this.resultScoreExcluded=new HndJsSeResultScore}return r.prototype.Reset=function(){this.input="",this.inputWordsExcluded.Clear(),this.inputWordsIncluded.Clear(),this.inputWordsMandatory.Clear(),this.resultScoreIncluded.Clear(),this.resultScoreMandatory.Clear(),this.resultScoreExcluded.Clear()},r.prototype.ParseInput=function(r){this.Reset(),this.input=r.trim();for(var o=/[-+]?"[^"]+"|[-+]?[^"\s]+/g;t=o.exec(this.input);)if(t[0]){var e=t[0].trim().toLowerCase();if(""!=e){var t="";for("-"!==e[0]&&"+"!==e[0]||(t=e[0],e=e.substr(1));0<e.length&&'"'===e[0];)e=e.substr(1);for(;0<e.length&&'"'===e[e.length-1];)e=e.substr(0,e.length-1);switch(t){case"-":this.inputWordsExcluded.AddWord(e);break;case"+":this.inputWordsIncluded.AddWord(e);break;default:this.inputWordsMandatory.AddWord(e)}}}},r.prototype.PerformSearch=function(r){var o,e=this;if(this.resultScoreIncluded=new HndJsSeResultScore,this.resultScoreMandatory=new HndJsSeResultScore,this.resultScoreExcluded=new HndJsSeResultScore,!r||!r.length)return console.error("Invalid word list data"),[];r.forEach(function(r){"string"==typeof r?o=r.trim().toLowerCase():Array.isArray(r)?""==o?console.warn("Empty word should not be included in list"):(-1!==e.inputWordsIncluded.FindPartial(o)&&e.resultScoreIncluded.AddTopics(r),-1!==e.inputWordsMandatory.FindPartial(o)&&e.resultScoreMandatory.AddTopics(r),-1!==e.inputWordsExcluded.FindPartial(o)&&e.resultScoreExcluded.AddTopics(r)):console.error("Invalid element in word list data:",r)});r=this.resultScoreIncluded;return r.AddTopics(this.resultScoreMandatory.scores),r.ExcludeTopics(this.resultScoreExcluded.scores),r.SortByScore(),r.scores},r}();